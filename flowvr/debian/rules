#!/usr/bin/make -f

# export DH_VERBOSE ?= 1

export DEB_BUILD_MAINT_OPTIONS = hardening=+all
export DEB_CFLAGS_MAINT_APPEND  = -Wall -pedantic
export DEB_LDFLAGS_MAINT_APPEND = -Wl,--as-needed

%:
	dh $@ --parallel

override_dh_auto_configure:
	dh_auto_configure --parallel -- \
		-DOpenGL_GL_PREFERENCE=LEGACY \
		-DCMAKE_BUILD_TYPE=Release \
		-DBUILD_FLOWVRD_MPI_PLUGIN=OFF \
		-DBUILD_FLOWVR_CONTRIB=OFF \
		-DBUILD_FLOWVR_DOXYGEN=ON \
		-DBUILD_FLOWVR_GLGRAPH=OFF \
		-DBUILD_FLOWVR_GLTRACE=ON \
		-DCMAKE_INSTALL_PREFIX=/opt/flowvr

override_dh_shlibdeps:
	dh_shlibdeps -l/opt/flowvr/lib
